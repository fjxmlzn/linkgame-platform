# linkgame-platform
Matlab course project (linkgame)'s platform

## 支持环境 ##
- windows10、MatlabR2014a测试通过。
- Mac10.10、MatlabR2014b测试通过。

## 该平台与之前李步宇学长的版本主要有以下区别 ##
1. 增加了一些功能，如设置游戏区域大小，显示所有可消块对等等，详见程序。
1. 游戏方块显示的坐标调整为与用户感知一致（左上角为原点），方便操作。（这个修改对第二题摄像头采集会有影响，但是是变得更方便。）
1. 根据李步宇学长的建议，取消了不友好的按键精灵调用。现在鼠标点击可以在matlab内部无缝衔接，顺便也不再需要管理员权限了。为了保持灵活性，独立出autoClick模块，详见后文。
1. 合并了原来的两道题的平台。  
原来第一题对应的游戏设置为：  
区域大小：7\*12；游戏无法继续进行时：不做任何处理；游戏区域数据来源：内部逻辑；输出模式：完整步骤。  
原来第二题对应的游戏设置为：  
区域大小：7\*12；游戏无法继续进行时：随机交换剩余方块；游戏区域数据来源：摄像头；输出模式：单个步骤。
1. 为了保证大作业的向下兼容，用户接口不变，包括omg、user_camera、ai、detect。

## 各个文件的说明 ##
1. ai.m-用户需要实现的摄像头模式AI。
1. autoClick.m-根据步骤自动点击的模块，类似于本次大作业的按键精灵程序，用户可以修改以支持其他游戏。它需要调用pressMouse模块。
1. bg.jpg-连连看游戏背景图片。用户可以根据喜好更换。
1. construct.m-生成指定大小、指定色数的游戏区域。暂且为最简单的随机生成方式。
1. detect.m-用户需要实现的判断块是否可消。
1. detect.p-detect模块pcode。
1. linkgame.fig-游戏主程序fig。
1. linkgame.m-游戏主程序代码。包含注释。
1. omg.m-用户需要实现的完整步骤外挂。
1. omg.p-omg模块pcode。
1. pics.mat-连连看精灵图片的cell数组。用户可以根据喜好更换。
1. pressMouse.p-调用java实现的鼠标点击模块。
1. user_camera.m-用户可以修改的摄像头数据采集模块。

## 用户操作和UI逻辑的简单说明 ##
1. 区域大小：方块行数列数。
1. 游戏无法继续进行时：设置没有可以消去的块时游戏逻辑的处理。
1. 开始新游戏：随时可以开始。点击后将会根据上述设置开始新的游戏，游戏过程中更改上述设置将不会生效。
1. 显示所有可消去块对：随时可以点击。点击后将会弹窗显示所有可消去的块对。
1. 游戏区域数据来源：外挂的数据来源，分别对应了第一题和第二题。
1. 调用模式：  
单次调用-只会调用外挂一次，外挂输出的step删去第一个元素（步骤数量，该元素存在完全是为了兼容现在的版本）后传入autoClick。  
多次调用-当还有可消除的块时，会反复调用外挂，外挂输出的step直接传入autoClock。因此，实际上，在两个模式中，外挂输出的步骤数是任意的。
1. 开启外挂：随时可以开启。点击后会根据上述设置开启外挂，外挂运行期间更改设置不会生效。外挂运行期间无法再次启动。外挂运行过程中可以随时按键盘E停止，但是需要确保是英文输入模式。

另外还有一些列提示用户的逻辑存在，比如区域大小的校验、外挂操作指导等。